<section>
	<h2>Commit</h2>
</section>

<section>
	<x-section-title>Commit</x-section-title>

	<p>A <b>commit</b> is a <b>snapshot</b> of the state of<br/>
		a <b>repository</b> at a specific moment</p>
	<p class="fragment">A <b>repository</b> is thus an ordered set of <b>commits</b></p>
	<small class="fragment">...and few additive stuff (we will get back to it later)</small>
</section>

<section>
	<x-section-title>Commit</x-section-title>

	<h3>How to create a commit?</h3>

	<p class="fragment">First we need to tell to git which <b>files</b><br/>
		we want to be included in the next <b>commit</b></p>

	<pre class="fragment"><code class="lang-bash input">git add [&lt;path_to_file&gt;...]</code></pre>

	<p class="fragment">Command <a href="https://git-scm.com/docs/git-add"><b>add</b></a> allows us to include files to the next snapshot(commit)</p>

	<small class="fragment">n.b. git will not include any file in a commit unless we will tell it to</small>
</section>

<section>
	<x-section-title>Commit</x-section-title>

	<pre><code class="lang-bash input">git add file1.txt file2.json</code></pre>

	<p class="fragment">What has changed?</p>

	<pre class="fragment"><code class="lang-bash input">git status</code></pre>
	<pre class="fragment"><code class="lang-sh">On branch master

No commits yet

Changes to be committed:
(use "git rm --cached &lt;file&gt;..." to unstage)
	new file:   file1.txt
	new file:   file2.json</code></pre>
	<p class="fragment">Command <a href="https://git-scm.com/docs/git-status"><b>status</b></a> returns some information about the current repository status</p>
</section>

<section>
	<x-section-title>Commit</x-section-title>

	<p>What has happened?</p>

	<p class="fragment">git copied the files to the <b>staging area</b></p>
	<p class="fragment">Now, the files are ready to be included in a commit</p>

	<small class="fragment">N.B. the files were copied to another place,<br/>
		so if we will further edit them,<br/>
		then we will have to add them again with the command <b>git add</b></small>
</section>

<section>
	<x-section-title>Commit</x-section-title>

	<p>Let's create the commit</p>
	<p class="fragment">To do this, we use the command <a href="https://git-scm.com/docs/git-commit"><b>commit</b></a></p>

	<pre class="fragment"><code class="lang-bash input">git commit</code></pre>

	<p class="fragment">A text file will open in our predefined text editor,<br/>
		in which we have to write, in the first line,<br/>
		a brief comment of the <b>commit</b></p>

	<p class="fragment">We save the file and the commit will be ready</p>

	<small class="fragment">n.b. in Linux environments the default editor for git is usually `vim`, `nano` or `vi`
		<a href="https://git-scm.com/book/it/v1/Per-Iniziare-Prima-Configurazione-di-Git#Il-tuo-Editor">Changing it is
			easy</a></small>
</section>

<section>
	<x-section-title>Commit</x-section-title>

	<p>What has happened?</p>

	<pre class="fragment"><code class="lang-bash input">git log</code></pre>
	<pre class="fragment"><code class="lang-sh">commit aa581d11d4caed7084cd8114d2454d9380acd869 (HEAD -> master)
Author: my_name &lt;my_mail@poul.org&gt;
Date:   Sat Aug 31 01:56:49 2019 +0200

This is my first commit</code></pre>

	<p class="fragment">The command <a href="https://git-scm.com/docs/git-log"><b>log</b></a> allows us to see all the commits in the history of the repository</p>
</section>

<section>
	<x-section-title>Commit</x-section-title>

	<h4>Can I include the comment<br/>
		in the command?</h4>

	<pre class="fragment"><code class="lang-bash input">git commit -m "This is my first commit"</code></pre>

	<p class="fragment">With this syntax we will prevent the opening of<br/>
		the text editor, providing the comment<br/>
		through the command line</p>

	<small class="fragment"
	   data-notes="Se é necessario avere più spazio, si puo andare a capo, ma il messaggio principale dovrebbe comunque rimanere nella prima riga entro i 50 caratteri">n.b.
		a commit's comment <b>should not</b> exceed 50 characters</small>
</section>

<section>
	<x-section-title>Commit</x-section-title>

	<h3>But, what is included in a commit?</h3>

	<ul>
		<li class="fragment">The edited files (obviously)<br/>
			<small class="fragment">...permissions included</small></li>
		<li class="fragment">Commit's author</li>
		<li class="fragment">The creation date of the commit</li>
		<li class="fragment">The fingerprint (hash) of the previous commit</li>
	</ul>

	<p class="fragment">All these data will be used to create<br/>
		the fingerprint (hash) of the commit</p>
</section>

<section data-notes="DEMO git init, add, commit">
	<x-section-title>Commit</x-section-title>

	<h3>(Other) strengths</h3>

	<p class="fragment" data-fragment-index="0">Each commit includes the fingerprint of the previous one</p>
	<p class="fragment" data-fragment-index="1">⇓</p>
	<p class="fragment" data-fragment-index="1">Edits of old commits are (generally) forbidden<br/>
		and easily identifiable</p>
</section>

<section data-notes="DEMO git reset; PAUSE">
	<x-section-title>Commit</x-section-title>

	<h3>But where did <kbd>ctrl</kbd>+<kbd>z</kbd> go?</h3>

	<p class="fragment">Search for the fingerprint of the commit,<br/>
		which we want to roll back</p>

	<pre class="fragment"><code class="lang-bash input">git reset &lt;commit_hash&gt;</code></pre>

	<p class="fragment">Command <a href="https://git-scm.com/docs/git-reset"><b>reset</b></a> restores the repo status to the specified old commit</p>

	<p class="fragment" style="color: red;">Be careful: from this point you could make a mess ⚠️</p>

	<small class="fragment">n.b. it is not necessary to specify the whole fingerprint of the commit,<br/>
		the initial part is sufficient</small>
</section>
